(function(t){function e(e){for(var n,o,i=e[0],c=e[1],l=e[2],p=0,h=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&h.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(h.length)h.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},r={app:0},s=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="http://treesflower.com/bbk/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},4365:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"player"===t.pageState,expression:"pageState === 'player'"}],staticClass:"header-options"},[a("a",{staticClass:"shadow-btn icon-btn menu-btn",attrs:{href:"javascript:;"}}),a("a",{staticClass:"shadow-btn icon-btn search-btn",attrs:{href:"javascript:;"},on:{click:t.searchPage}})]),a("Search",{directives:[{name:"show",rawName:"v-show",value:"search"===t.pageState,expression:"pageState === 'search'"}],on:{play:t.play}}),a("Player",{directives:[{name:"show",rawName:"v-show",value:"player"===t.pageState&&t.songInfo.audioUrl,expression:"pageState === 'player' && songInfo.audioUrl"}],ref:"player",attrs:{songInfo:t.songInfo},on:{"update:songInfo":function(e){t.songInfo=e},"update:song-info":function(e){t.songInfo=e}}})],1)},s=[],o=(a("99af"),a("a15b"),a("d81d"),a("b0c0"),a("b680"),a("ac1f"),a("1276"),a("96cf"),a("1da1")),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"player-container"},[a("div",{staticClass:"song-info"},[a("span",{staticClass:"name"},[t._v(t._s(t.songName))]),a("span",{staticClass:"singer"},[t._v(t._s(t.singer))]),a("span",{staticClass:"albums-name"},[t._v("《"+t._s(t.albumsName)+"》")])]),a("div",{staticClass:"cover-area"},[a("div",{staticClass:"cover-wrapper"},[a("img",{attrs:{src:t.coverUrl,alt:""}})])]),a("div",{staticClass:"lyric-area"},[a("ul",{ref:"lyric",staticClass:"lyric",style:{top:t.lyricTop}},t._l(t.lrc,(function(e,n){return a("li",{key:e.key,class:t.currentLrc(n)?"current-lrc":""},[t._v(t._s(e.value))])})),0)]),a("div",{staticClass:"progress-bar"},[a("div",{staticClass:"progress-controller",style:{width:t.progress}})]),a("div",{staticClass:"time-area"},[a("span",{staticClass:"current-time"},[t._v(t._s(t.currentTime))]),a("span",{staticClass:"totle-time"},[t._v(t._s(t.duration))])]),a("div",{staticClass:"options-area"},[a("a",{staticClass:"shadow-btn icon-btn option-btn volume-btn",attrs:{href:"javascript:;"}}),a("a",{staticClass:"shadow-btn icon-btn option-btn prev-btn",attrs:{href:"javascript:;"}}),a("a",{staticClass:"shadow-btn icon-btn option-btn",class:"play"===t.playState?"pause-btn":"play-btn",attrs:{href:"javascript:;"},on:{click:t.play}}),a("a",{staticClass:"shadow-btn icon-btn option-btn next-btn",attrs:{href:"javascript:;"}}),a("a",{staticClass:"shadow-btn icon-btn option-btn list-btn",attrs:{href:"javascript:;"}})]),a("audio",{ref:"audio",staticStyle:{display:"none"},attrs:{src:t.audioUrl,controls:"",loop:"true"},on:{timeupdate:t.timeupdate,canplay:t.canplay}})])},c=[],l={props:{songInfo:{type:Object,default:function(){}}},data:function(){return{songName:"",singer:"",albumsName:"",audioUrl:"",coverUrl:"",lrc:[],playState:"pause",progress:"0%",currentTime:"00:00:00",duration:"00:00:00",currentSeconds:0,lyricTop:"0px"}},created:function(){this.init(this.songInfo)},methods:{init:function(t){this.songName=t.name,this.singer=t.singer,this.albumsName=t.albumsName,this.audioUrl=t.audioUrl,this.coverUrl=t.coverUrl,this.lrc=t.lrc},update:function(t){this.init(t),this.$refs.audio.load()},canplay:function(){this.$refs.audio.play(),this.playState="play"},play:function(){"play"===this.playState?(this.$refs.audio.pause(),this.playState="pause"):(this.$refs.audio.play(),this.playState="play")},timeupdate:function(t){var e=t.target,a=e.duration,n=e.currentTime;this.duration=this.formatSeconds(a||0),this.currentTime=this.formatSeconds(n),this.currentSeconds=n,this.progress=e.currentTime/e.duration*100+"%"},formatSeconds:function(t){var e=parseInt(t),a=Math.floor(e/3600)<10?"0"+Math.floor(e/3600):Math.floor(e/3600),n=Math.floor(e/60%60)<10?"0"+Math.floor(e/60%60):Math.floor(e/60%60),r=Math.floor(e%60)<10?"0"+Math.floor(e%60):Math.floor(e%60);return e="".concat(a,":").concat(n,":").concat(r),e},currentLrc:function(t){var e=this.lrc[t].time<=Math.floor(this.currentSeconds+1)&&Math.floor(this.currentSeconds+1)<=this.lrc[t+1].time;if(e){var a=document.querySelectorAll(".current-lrc")[0];this.lyricTop="-".concat(a&&a.offsetTop-30,"px")}return e}}},u=l,p=(a("e058"),a("2877")),h=Object(p["a"])(u,i,c,!1,null,"0ae27a94",null),d=h.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-container"},[a("div",{staticClass:"search-input-wrapper"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],attrs:{type:"text",placeholder:"搜索音乐"},domProps:{value:t.searchText},on:{keydown:t.searchKeydown,input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),a("a",{staticClass:"shadow-btn icon-btn search-btn",attrs:{href:"javascript:;"},on:{click:t.search}})]),a("div",{directives:[{name:"bottom-load",rawName:"v-bottom-load",value:t.loadMore,expression:"loadMore"}],staticClass:"result-area"},t._l(t.result,(function(e){return a("div",{key:e.contentId,staticClass:"song-list"},[a("div",{staticClass:"list-left"},[a("span",{staticClass:"song-name"},[t._v(t._s(e.name)),t._l(e.singers,(function(e){return a("span",{key:e.id,staticClass:"singer-name"},[t._v(t._s(e.name))])}))],2),e.albums?a("span",[t._v("《"+t._s(e.albums[0].name)+"》")]):t._e()]),a("div",{staticClass:"list-right"},[a("a",{staticClass:"shadow-btn icon-btn play-btn",attrs:{href:"javascript:;"},on:{click:function(a){return t.play(e)}}})])])})),0),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading-bar shadow-btn iconfont"},[a("i",[t._v("")]),a("span",[t._v("加载中")])])])],1)},g=[],v=(a("d3b7"),a("841c"),a("2909")),m={data:function(){return{searchText:"米兰的小铁匠",result:[],page:1,pageSize:10,loading:!1}},created:function(){this.search()},methods:{searchKeydown:function(t){13===t.keyCode&&this.search()},search:function(){var t=this;this.page=1,this.$http.get("http://pd.musicapp.migu.cn/MIGUM3.0/v1.0/content/search_all.do?&ua=Android_migu&version=5.0.1&text=".concat(this.searchText,"&pageNo=").concat(this.page,"&pageSize=").concat(this.pageSize,'&searchSwitch={"song":1,"album":0,"singer":0,"tagSong":0,"mvSong":0,"songlist":0,"bestShow":1}')).then((function(e){t.result=e&&e.songResultData&&e.songResultData.result}))},play:function(t){this.$emit("play",t)},loadMore:function(){var t=this;this.loading||(this.loading=!0,this.page++,this.$http.get("http://pd.musicapp.migu.cn/MIGUM3.0/v1.0/content/search_all.do?&ua=Android_migu&version=5.0.1&text=".concat(this.searchText,"&pageNo=").concat(this.page,"&pageSize=").concat(this.pageSize,'&searchSwitch={"song":1,"album":0,"singer":0,"tagSong":0,"mvSong":0,"songlist":0,"bestShow":1}')).then((function(e){var a=e&&e.songResultData&&e.songResultData.result;t.result=[].concat(Object(v["a"])(t.result),Object(v["a"])(a))})).catch((function(e){console.log(e),t.page--})).finally((function(){t.loading=!1})))}}},b=m,y=(a("e589"),Object(p["a"])(b,f,g,!1,null,null,null)),w=y.exports,S={name:"App",components:{Player:d,Search:w},data:function(){return{songInfo:{audioUrl:"",lrc:[],coverUrl:""},toneFlag:"HQ",pageState:"search"}},methods:{getAudioUrl:function(t,e){return"http://218.205.239.34/MIGUM2.0/v1.0/content/sub/listenSong.do?toneFlag=".concat(t,"&netType=00&copyrightId=0&contentId=").concat(e,"&resourceType=").concat("HQ"===t?2:"E","&channel=0")},searchPage:function(){this.pageState="search"},play:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.$http.get(t.lyricUrl);case 3:n=a.sent,e.lrc=n.split("\n").map((function(t){return{time:e.timeToSencond(t.substr(1,8)),value:t.substr(10),key:t.substr(0,9)+Date.now(),current:!1}})),e.songInfo={name:t.name,singer:t.singers.map((function(t){return t.name})).join("，"),albumsName:t.albums&&t.albums[0]&&t.albums[0].name||"",audioUrl:e.getAudioUrl(e.toneFlag,t.contentId),coverUrl:t.imgItems[1].img,lrc:e.lrc},e.$refs.player.update(e.songInfo),e.pageState="player",a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,10]])})))()},timeToSencond:function(t){if(t){var e=t.split(":"),a=parseInt(e[0]),n=parseFloat(e[1]);return(60*a+n).toFixed(2)}}}},_=S,x=(a("5c0b"),Object(p["a"])(_,r,s,!1,null,null,null)),C=x.exports,j=a("d4ec"),T=a("bee2"),M=a("62c3"),I=a.n(M),O=function(){function t(){Object(j["a"])(this,t),I.a.defaults.headers["Content-Type"]="application/json"}return Object(T["a"])(t,[{key:"post",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,I.a.post(e,a).then((function(t){return t.data})).catch((function(t){console.log(t)}));case 2:return t.abrupt("return",this.result=t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"get",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,I.a.get(e,{params:a||{}}).then((function(t){return t.data})).catch((function(t){console.log(t)}));case 2:return t.abrupt("return",this.result=t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()}]),t}();n["a"].config.productionTip=!1;var k={install:function(t){t.prototype.$http=new O}};n["a"].use(k),n["a"].directive("bottom-load",{bind:function(t,e){t.addEventListener("scroll",(function(){var t=30,a=this.scrollHeight-this.scrollTop-this.clientHeight;a<=t&&e.value()}))}}),new n["a"]({render:function(t){return t(C)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var n=a("9c0c"),r=a.n(n);r.a},"64a4":function(t,e,a){},"9c0c":function(t,e,a){},e058:function(t,e,a){"use strict";var n=a("64a4"),r=a.n(n);r.a},e589:function(t,e,a){"use strict";var n=a("4365"),r=a.n(n);r.a}});
//# sourceMappingURL=app.df46e655.js.map