(function(t){function e(e){for(var a,i,o=e[0],c=e[1],l=e[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(s.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},r={app:0},s=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="http://treesflower.com/bbk/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"3b2f":function(t,e,n){},"44fd":function(t,e,n){},"4af4":function(t,e,n){"use strict";var a=n("3b2f"),r=n.n(a);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"player"===t.pageState,expression:"pageState === 'player'"}],staticClass:"header-options"},[n("a",{staticClass:"shadow-btn icon-btn menu-btn",attrs:{href:"javascript:;"}}),n("a",{staticClass:"shadow-btn icon-btn search-btn",attrs:{href:"javascript:;"},on:{click:t.searchPage}})]),n("Search",{directives:[{name:"show",rawName:"v-show",value:"search"===t.pageState,expression:"pageState === 'search'"}],on:{play:t.play}}),n("Player",{directives:[{name:"show",rawName:"v-show",value:"player"===t.pageState&&t.songInfo.audioUrl,expression:"pageState === 'player' && songInfo.audioUrl"}],ref:"player",attrs:{songInfo:t.songInfo},on:{"update:songInfo":function(e){t.songInfo=e},"update:song-info":function(e){t.songInfo=e}}})],1)},s=[],i=(n("99af"),n("a15b"),n("d81d"),n("b0c0"),n("b680"),n("ac1f"),n("1276"),n("96cf"),n("1da1")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"player-container"},[n("div",{staticClass:"song-info"},[n("span",{staticClass:"name"},[t._v(t._s(t.songName))]),n("span",{staticClass:"singer"},[t._v(t._s(t.singer))]),n("span",{staticClass:"albums-name"},[t._v("《"+t._s(t.albumsName)+"》")])]),n("div",{staticClass:"cover-area"},[n("div",{staticClass:"cover-wrapper"},[n("img",{attrs:{src:t.coverUrl,alt:""}})])]),n("div",{staticClass:"lyric-area"},[n("ul",{ref:"lyric",staticClass:"lyric",style:{top:t.lyricTop}},t._l(t.lrc,(function(e,a){return n("li",{key:e.key,class:t.currentLrc(a)?"current-lrc":""},[t._v(t._s(e.value))])})),0),n("div",{staticClass:"lyric-mask"})]),n("div",{staticClass:"player-bottom"},[n("div",{ref:"progress",staticClass:"progress-bar",on:{click:t.progressClick}},[n("div",{staticClass:"progress-value",style:{width:t.progress}}),n("div",{staticClass:"progress-controller",style:{left:t.progress}})]),n("div",{staticClass:"time-area"},[n("span",{staticClass:"current-time"},[t._v(t._s(t.currentTime))]),n("span",{staticClass:"totle-time"},[t._v(t._s(t.duration))])]),n("div",{staticClass:"options-area"},[n("a",{staticClass:"shadow-btn icon-btn option-btn volume-btn",attrs:{href:"javascript:;"}}),n("a",{staticClass:"shadow-btn icon-btn option-btn prev-btn",attrs:{href:"javascript:;"}}),n("a",{staticClass:"shadow-btn icon-btn option-btn",class:"play"===t.playState?"pause-btn":"play-btn",attrs:{href:"javascript:;"},on:{click:t.play}}),n("a",{staticClass:"shadow-btn icon-btn option-btn next-btn",attrs:{href:"javascript:;"}}),n("a",{staticClass:"shadow-btn icon-btn option-btn list-btn",attrs:{href:"javascript:;"}})]),n("audio",{ref:"audio",staticStyle:{display:"none"},attrs:{src:t.audioUrl,controls:"",loop:"true"},on:{timeupdate:t.timeupdate,canplay:t.canplay}})])])},c=[],l={props:{songInfo:{type:Object,default:function(){}}},data:function(){return{songName:"",singer:"",albumsName:"",audioUrl:"",coverUrl:"",lrc:[],playState:"pause",progress:"0%",currentTime:"00:00:00",duration:"00:00:00",currentSeconds:0,lyricTop:"0px"}},created:function(){this.init(this.songInfo)},methods:{init:function(t){this.songName=t.name,this.singer=t.singer,this.albumsName=t.albumsName,this.audioUrl=t.audioUrl,this.coverUrl=t.coverUrl,this.lrc=t.lrc},update:function(t){this.init(t),this.$refs.audio.load()},canplay:function(){this.$refs.audio.play(),this.playState="play"},play:function(){"play"===this.playState?(this.$refs.audio.pause(),this.playState="pause"):(this.$refs.audio.play(),this.playState="play")},timeupdate:function(t){var e=t.target,n=e.duration,a=e.currentTime;this.duration=this.formatSeconds(n||0),this.currentTime=this.formatSeconds(a),this.currentSeconds=a,this.progress=e.currentTime/e.duration*100+"%"},formatSeconds:function(t){var e=parseInt(t),n=Math.floor(e/3600)<10?"0"+Math.floor(e/3600):Math.floor(e/3600),a=Math.floor(e/60%60)<10?"0"+Math.floor(e/60%60):Math.floor(e/60%60),r=Math.floor(e%60)<10?"0"+Math.floor(e%60):Math.floor(e%60);return e="".concat(n,":").concat(a,":").concat(r),e},currentLrc:function(t){var e=this.lrc[t]?this.lrc[t].time:0,n=this.lrc[t+1]?this.lrc[t+1].time:0,a=Math.floor(this.currentSeconds+1),r=e<=a&&a<=n;if(r){var s=document.querySelectorAll(".current-lrc")[0];this.lyricTop="-".concat(s&&s.offsetTop-30,"px")}return r},progressClick:function(t){var e=this.$refs.progress.offsetWidth,n=t.offsetX,a=n/e,r=this.$refs.audio.duration;this.$refs.audio.currentTime=r*a}}},u=l,p=(n("c611"),n("2877")),d=Object(p["a"])(u,o,c,!1,null,"19e0fa6c",null),f=d.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-container"},[n("div",{staticClass:"search-input-wrapper"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],attrs:{type:"text",placeholder:"搜索音乐"},domProps:{value:t.searchText},on:{keydown:t.searchKeydown,input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),n("a",{staticClass:"shadow-btn icon-btn search-btn",attrs:{href:"javascript:;"},on:{click:t.search}})]),n("div",{directives:[{name:"bottom-load",rawName:"v-bottom-load",value:t.searchMoreSong,expression:"searchMoreSong"}],staticClass:"result-area"},t._l(t.result,(function(e){return n("div",{key:e.contentId,staticClass:"song-list",on:{click:function(n){return t.play(e)}}},[n("div",{staticClass:"list-left"},[n("span",{staticClass:"song-name"},[t._v(" "+t._s(e.name)+" "),t._l(e.singers,(function(e){return n("span",{key:e.id,staticClass:"singer-name"},[t._v(t._s(e.name))])}))],2),e.albums?n("span",{staticClass:"albums"},[t._v("《"+t._s(e.albums[0].name)+"》")]):t._e()]),n("div",{staticClass:"list-right"},[e.inList?n("a",{staticClass:"shadow-btn icon-btn like-btn liked-btn",attrs:{href:"javascript:;"}}):n("a",{staticClass:"shadow-btn icon-btn like-btn",attrs:{href:"javascript:;"},on:{click:function(n){return n.stopPropagation(),t.like(e)}}})])])})),0),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading-bar shadow-btn iconfont"},[n("i",[t._v("")]),n("span",[t._v("加载中")])])])],1)},g=[],v=(n("4160"),n("d3b7"),n("841c"),n("159b"),n("2909")),m={SEARCH_SONG_BY_KEYWORD:"http://pd.musicapp.migu.cn/MIGUM3.0/v1.0/content/search_all.do",GET_AUDIO_INFO:"http://218.205.239.34/MIGUM2.0/v1.0/content/sub/listenSong.do"},b=(n("4de4"),function(t){var e=localStorage.getItem("likeSongs");if(e){var n=JSON.parse(e);y(t.contentId)||(n["song-list"].push(t),localStorage.setItem("likeSongs",JSON.stringify(n)))}}),y=function(t){var e=localStorage.getItem("likeSongs");if(!e)return null;var n=JSON.parse(e)["song-list"].filter((function(e){return e.contentId===t}));return n.length?n[0]:null},S={data:function(){return{searchText:"艾福杰尼",result:[],page:0,pageSize:20,loading:!1}},created:function(){this.searchMoreSong()},methods:{search:function(){this.page=0,this.result=[],this.searchMoreSong()},searchKeydown:function(t){13===t.keyCode&&this.search()},searchMoreSong:function(){var t=this;this.loading||(this.loading=!0,this.page++,this.$http.get(m.SEARCH_SONG_BY_KEYWORD,{"&ua":"Android_migu",text:this.searchText,pageNo:this.page,pageSize:this.pageSize,version:"5.0.1",searchSwitch:{song:1,album:0,singer:0,tagSong:0,mvSong:0,songlist:0,bestShow:1}}).then((function(e){var n=e&&e.songResultData&&e.songResultData.result;n.forEach((function(t){t["inList"]=!!y(t.contentId)})),t.result=[].concat(Object(v["a"])(t.result),Object(v["a"])(n))})).catch((function(e){console.log(e),t.page--})).finally((function(){t.loading=!1})))},getFilterSong:function(t){var e=t.lyricUrl,n=t.name,a=t.singers,r=t.albums,s=t.contentId,i=t.imgItems;return{lyricUrl:e,name:n,singers:a,albums:r,contentId:s,imgItems:i}},play:function(t){this.$emit("play",this.getFilterSong(t))},like:function(t){t["inList"]=!0,b(this.getFilterSong(t))}}},w=S,C=(n("4af4"),Object(p["a"])(w,h,g,!1,null,null,null)),_=C.exports,x={components:{Player:f,Search:_},data:function(){return{songInfo:{audioUrl:"",lrc:[],coverUrl:""},toneFlag:"HQ",pageState:"search"}},methods:{getAudioUrl:function(t,e){return"".concat(m.GET_AUDIO_INFO,"?toneFlag=").concat(t,"&netType=00&copyrightId=0&contentId=").concat(e,"&resourceType=").concat("HQ"===t?2:"E","&channel=0")},searchPage:function(){this.pageState="search"},play:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$http.get(t.lyricUrl);case 3:a=n.sent,e.lrc=a.split("\n").map((function(t){return{time:e.timeToSencond(t.substr(1,8)),value:t.substr(10),key:t+Date.now(),current:!1}})),n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](0),console.log(n.t0),e.lrc=[];case 11:e.songInfo={name:t.name,singer:t.singers.map((function(t){return t.name})).join("，"),albumsName:t.albums&&t.albums[0]&&t.albums[0].name||"",audioUrl:e.getAudioUrl(e.toneFlag,t.contentId),coverUrl:t.imgItems[1].img,lrc:e.lrc},e.$refs.player.update(e.songInfo),e.pageState="player";case 14:case"end":return n.stop()}}),n,null,[[0,7]])})))()},timeToSencond:function(t){if(t){var e=t.split(":"),n=parseInt(e[0]),a=parseFloat(e[1]);return(60*n+a).toFixed(2)}}}},I=x,k=(n("5c0b"),Object(p["a"])(I,r,s,!1,null,null,null)),O=k.exports,j=n("d4ec"),T=n("bee2"),M=n("62c3"),U=n.n(M),N=function(){function t(){Object(j["a"])(this,t),U.a.defaults.headers["Content-Type"]="application/json"}return Object(T["a"])(t,[{key:"post",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,U.a.post(e,n).then((function(t){return t.data})).catch((function(t){console.log(t)}));case 2:return t.abrupt("return",this.result=t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()},{key:"get",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,U.a.get(e,{params:n||{}}).then((function(t){return t.data})).catch((function(t){console.log(t)}));case 2:return t.abrupt("return",this.result=t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}()}]),t}();n("44fd"),n("d332");a["a"].config.productionTip=!1;var E={install:function(t){t.prototype.$http=new N}};a["a"].use(E),a["a"].directive("bottom-load",{bind:function(t,e){t.addEventListener("scroll",(function(){var t=30,n=this.scrollHeight-this.scrollTop-this.clientHeight;n<=t&&e.value()}))}}),new a["a"]({render:function(t){return t(O)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var a=n("9c0c"),r=n.n(a);r.a},"83d1":function(t,e,n){},"9c0c":function(t,e,n){},c611:function(t,e,n){"use strict";var a=n("83d1"),r=n.n(a);r.a},d332:function(t,e){(function(t,e){var n=e.documentElement,a=t.devicePixelRatio||1;function r(){e.body?e.body.style.fontSize=12*a+"px":e.addEventListener("DOMContentLoaded",r)}function s(){var t=n.clientWidth/10;n.style.fontSize=t+"px"}if(r(),s(),t.addEventListener("resize",s),t.addEventListener("pageshow",(function(t){t.persisted&&s()})),a>=2){var i=e.createElement("body"),o=e.createElement("div");o.style.border=".5px solid transparent",i.appendChild(o),n.appendChild(i),1===o.offsetHeight&&n.classList.add("hairlines"),n.removeChild(i)}})(window,document)}});
//# sourceMappingURL=app.a5b9e6bd.js.map